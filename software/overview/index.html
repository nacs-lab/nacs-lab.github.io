<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Overview - Ni Lab Documentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" disabled>
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Ni Lab Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Computer Concepts</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../computer_concepts/system_management/" class="dropdown-item">Computer Systems</a>
</li>
                                    
<li>
    <a href="../../computer_concepts/languages/" class="dropdown-item">What Language Should I Use?</a>
</li>
                                    
<li>
    <a href="../../computer_concepts/networking/" class="dropdown-item">Networking</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Software Documentation</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Overview</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../computer_concepts/networking/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                              <button id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme" class="nav-link dropdown-toggle">
                                <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                <span class="d-lg-none ms-2">Toggle theme</span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                                    <i class="fa-solid fa-sun fa-fw"></i>
                                    <span class="ms-2">Light</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                                    <i class="fa-solid fa-moon fa-fw"></i>
                                    <span class="ms-2">Dark</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="true">
                                    <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                    <span class="ms-2">Auto</span>
                                    <i class="fa-solid fa-check ms-auto"></i>
                                  </button>
                                </li>
                              </ul>
                            </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#software-overview" class="nav-link">Software Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="software-overview">Software Overview</h1>
<p>There are many different pieces of software that come together to run all pieces of the computer control system. We first provide an overview of what are all the pieces of software that are needed and list the repositories that one needs to access to acquire and review the source code. We go from the top-down for this overview. </p>
<ul>
<li>
<p><strong>MATLAB Frontend</strong>: The frontend is written in MATLAB and predominantly lives in <em>two</em> repositories. The shared code that is in principle usable by all experiments is located in the repository <a href="https://github.com/nacs-lab/libnacs-matlab"><code>libnacs-matlab</code></a>. This shared code is a submodule for the main experimental control frontend code that is located in the repository <a href="https://git.yuyichao.com/nigrp/experiment-control"><code>experiment-control</code></a>. Note that the shared code is hosted by <code>github</code>, while the actual experimental control code that contains the sequences and scans we run is hosted by <code>gitlab</code> on the private server of former graduate student Yichao Yu. </p>
</li>
<li>
<p><strong>Python interface to <code>libnacs</code></strong>: The MATLAB primary communicates with our <strong>compiled</strong> C++ code via the Python repository <a href="https://github.com/nacs-lab/python-libnacs"><code>python-libnacs</code></a>. The code in this repository is rather limited and mainly wraps the functions that are exposed from the C++ layer. 
;</p>
</li>
<li>
<p><strong>C++ library codebase</strong>: The C++ codebase is known as <a href="https://github.com/nacs-lab/libnacs"><code>libnacs</code></a>, and contains nearly all the C++ code on our experiment. This means it is used in multiple locations and serves many functions. On the experimental computer side, <code>libnacs</code> contains functions to compile a sequence as well as device-specific classes that are responsible for executing the sequence from the experimental computer side. These are client classes that ultimately send commands across a network. It also contains many utilities like functions covering memory and system management to networking tools, so it is also a helper library for other repositories including <a href="https://github.com/nacs-lab/nacs-spcm"><code>nacs-spcm</code></a> and <a href="https://github.com/nacs-lab/molecube"><code>molecube</code></a>.</p>
</li>
<li>
<p><strong>FPGA server</strong>: The server code that runs on the FPGA is known as <a href="https://github.com/nacs-lab/molecube"><code>molecube</code></a>. Molecube is a server so it responds to requests sent over a network either to provide simple pieces of information (such as the current status of the DDS and TTL channels) or it will run sequences on demand. Molecube communicates with the FPGA via reading and writing to a special memory address specified in the hardware configuration. This read and write occurs through the <a href="https://github.com/nacs-lab/knacs"><code>knacs</code></a> kernel driver. </p>
</li>
<li>
<p><strong>FPGA kernel driver</strong>: The FPGA kernel driver handles the interface between the software running on the FPGA (<a href="https://github.com/nacs-lab/molecube"><code>molecube</code></a>) and the hardware, which has been configured according to the source code in <a href="https://github.com/nacs-lab/molecube-hw"><code>molecube-hw</code></a>. The kernel driver has simple code to memory map the address of the main AXI bus used to communicate with the hardware.</p>
</li>
<li>
<p><strong>FPGA hardware "code"</strong>: The source FPGA hardware code, mostly written in SystemVerilog, is located in <a href="https://github.com/nacs-lab/molecube-hw"><code>molecube-hw</code></a>. This code needs to be synthesized and implemented in Vivado, where the final product is a hardware configuration bit file. This hardware code is responsible for implementing commands with FPGA clock-cycle precision timing. These commands are responsible for programming the Analog Devices DDS chips and for adjusting the TTL outputs. </p>
</li>
<li>
<p><strong>AWG server code</strong>: The AWG card is a PCIe card which is hosted on a separate computer. The AWG code located in <a href="https://github.com/nacs-lab/nacs-spcm"><code>nacs-spcm</code></a> contains a server which can respond to client requests such as running a sequence. It also contains code that interfaces with the Spectrum Instrumentation provided kernel driver to produce physical output on the card.</p>
</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../mathjax_config.js"></script>
        <script src="../../MathJax/es5/tex-chtml.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
